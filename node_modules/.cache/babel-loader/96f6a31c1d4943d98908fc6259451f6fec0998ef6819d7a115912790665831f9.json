{"ast":null,"code":"import axios from 'axios';\n\n// Re-export types for convenience\n\nconst API_BASE_URL = 'http://localhost:8080';\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true,\n  // Important for session-based auth\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Auth endpoints\nexport const authApi = {\n  login: async data => {\n    try {\n      const response = await api.post('/auth/login', data);\n      console.log('Login response:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response;\n      console.error('Login error:', ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data) || error.message);\n      throw error;\n    }\n  },\n  register: async data => {\n    try {\n      const response = await api.post('/auth/register', data);\n      console.log('Register response:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response2;\n      console.error('Register error:', ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n      throw error;\n    }\n  },\n  logout: async () => {\n    try {\n      const response = await api.post('/auth/logout');\n      console.log('Logout response:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response3;\n      console.error('Logout error:', ((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data) || error.message);\n      throw error;\n    }\n  },\n  getCurrentUser: async () => {\n    try {\n      const response = await api.get('/auth/me');\n      console.log('Get current user response:', response.data);\n      return response.data;\n    } catch (error) {\n      var _error$response4;\n      console.error('Get current user error:', ((_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data) || error.message);\n      throw error;\n    }\n  }\n};\n\n// Share endpoints\nexport const shareApi = {\n  getShares: (page = 0, size = 20, sort = 'recent') => api.get(`/shares?page=${page}&size=${size}&sort=${sort}`).then(res => res.data),\n  getShare: id => api.get(`/shares/${id}`).then(res => res.data),\n  createShare: data => api.post('/shares', data).then(res => res.data),\n  likeShare: id => api.post(`/shares/${id}/like`).then(res => res.data),\n  unlikeShare: id => api.delete(`/shares/${id}/like`).then(res => res.data),\n  searchShares: (query, page = 0, size = 20) => api.get(`/shares/search?q=${encodeURIComponent(query)}&page=${page}&size=${size}`).then(res => res.data)\n};\n\n// User endpoints\nexport const userApi = {\n  getMyShares: (page = 0, size = 20) => api.get(`/users/me/shares?page=${page}&size=${size}`).then(res => res.data),\n  getUserShares: (username, page = 0, size = 20) => api.get(`/users/${username}/shares?page=${page}&size=${size}`).then(res => res.data)\n};\nexport default api;","map":{"version":3,"names":["axios","API_BASE_URL","api","create","baseURL","withCredentials","headers","authApi","login","data","response","post","console","log","error","_error$response","message","register","_error$response2","logout","_error$response3","getCurrentUser","get","_error$response4","shareApi","getShares","page","size","sort","then","res","getShare","id","createShare","likeShare","unlikeShare","delete","searchShares","query","encodeURIComponent","userApi","getMyShares","getUserShares","username"],"sources":["C:/Users/enest/IdeaProjects/tupalle/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { \r\n  Share, \r\n  CreateShareRequest, \r\n  LoginRequest, \r\n  RegisterRequest, \r\n  AuthResponse, \r\n  ApiResponse \r\n} from '../types';\r\n\r\n// Re-export types for convenience\r\nexport type { Share, AuthResponse, ApiResponse, CreateShareRequest, LoginRequest, RegisterRequest };\r\n\r\nconst API_BASE_URL = 'http://localhost:8080';\r\n\r\nconst api = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  withCredentials: true, // Important for session-based auth\r\n  headers: {\r\n    'Content-Type': 'application/json',\r\n  },\r\n});\r\n\r\n// Auth endpoints\r\nexport const authApi = {\r\n  login: async (data: LoginRequest): Promise<AuthResponse> => {\r\n    try {\r\n      const response = await api.post('/auth/login', data);\r\n      console.log('Login response:', response.data);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.error('Login error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  register: async (data: RegisterRequest): Promise<AuthResponse> => {\r\n    try {\r\n      const response = await api.post('/auth/register', data);\r\n      console.log('Register response:', response.data);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.error('Register error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  logout: async (): Promise<AuthResponse> => {\r\n    try {\r\n      const response = await api.post('/auth/logout');\r\n      console.log('Logout response:', response.data);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.error('Logout error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  getCurrentUser: async (): Promise<AuthResponse> => {\r\n    try {\r\n      const response = await api.get('/auth/me');\r\n      console.log('Get current user response:', response.data);\r\n      return response.data;\r\n    } catch (error: any) {\r\n      console.error('Get current user error:', error.response?.data || error.message);\r\n      throw error;\r\n    }\r\n  },\r\n};\r\n\r\n// Share endpoints\r\nexport const shareApi = {\r\n  getShares: (page = 0, size = 20, sort = 'recent'): Promise<ApiResponse<Share>> =>\r\n    api.get(`/shares?page=${page}&size=${size}&sort=${sort}`).then(res => res.data),\r\n  \r\n  getShare: (id: string): Promise<Share> =>\r\n    api.get(`/shares/${id}`).then(res => res.data),\r\n  \r\n  createShare: (data: CreateShareRequest): Promise<Share> =>\r\n    api.post('/shares', data).then(res => res.data),\r\n  \r\n  likeShare: (id: string): Promise<void> =>\r\n    api.post(`/shares/${id}/like`).then(res => res.data),\r\n  \r\n  unlikeShare: (id: string): Promise<void> =>\r\n    api.delete(`/shares/${id}/like`).then(res => res.data),\r\n  \r\n  searchShares: (query: string, page = 0, size = 20): Promise<ApiResponse<Share>> =>\r\n    api.get(`/shares/search?q=${encodeURIComponent(query)}&page=${page}&size=${size}`).then(res => res.data),\r\n};\r\n\r\n// User endpoints\r\nexport const userApi = {\r\n  getMyShares: (page = 0, size = 20): Promise<ApiResponse<Share>> =>\r\n    api.get(`/users/me/shares?page=${page}&size=${size}`).then(res => res.data),\r\n  \r\n  getUserShares: (username: string, page = 0, size = 20): Promise<ApiResponse<Share>> =>\r\n    api.get(`/users/${username}/shares?page=${page}&size=${size}`).then(res => res.data),\r\n};\r\n\r\nexport default api;\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}